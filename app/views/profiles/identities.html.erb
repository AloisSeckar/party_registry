<%
  page_title "Přihlašován přes sociální sítě"
  render 'sidebar'
%>

<% providers = %w(Facebook Twitter MojeID)%>

<% if @identities.size < providers.size %>
<p class="bg-info">Pro přihlašování do registru můžete využít i externí služby. Např. Facebook nebo Twitter. Provázání s Vaším účtem můžete nastavit níže.</p>
<% end %>

<table class="table table-striped">
  <thead>
    <tr><th>Služba</th><th></th></tr>
  </thead>
  <tbody>
  <% for provider_name in providers %>
  <% provider = provider_name.downcase %>
  <% identity = @identities.detect{|i| i.provider==provider} %>
  <tr>
    <th><%= provider_name %></th>
    <% if identity %>
      <td>Nastaveno (<%= identity.uid %>)</td>
      <%#= button_to 'Odebrat', identity, class: "btn btn-xs btn-danger", method: :delete, data: { confirm: 'Opravdu chcete smazat tento kontakt?' } %>
    <% else %>
      <td><%= button_to "Nastavit", person_omniauth_authorize_path(provider) %></td>
    <% end %>
  </tr>
  <% end %>
  </tbody>
</table>
